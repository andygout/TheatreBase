{{> fieldset-input-text}}

{{#with instance}}
	<fieldset class="fieldset">
		{{> fieldset-header text='Theatre'}}
		{{> input-text
			labelText='Name'
			inputName='theatre[name]'
			value=theatre.name
			errors=theatre.errors.name
			required=true
		}}
	</fieldset>

	<fieldset class="fieldset">
		{{> fieldset-header text='Playtext'}}
		{{> input-text
			labelText='Name'
			inputName='playtext[name]'
			value=playtext.name
			errors=playtext.errors.name
		}}
	</fieldset>

	<fieldset class="fieldset">
		{{> fieldset-header text='Cast'}}
		{{#if cast.length}}
			{{#each cast}}
				{{> input-text
					labelText='Cast member'
					inputName=(concat 'cast[' @index '][name]')
					value=name
					errors=errors.name
					removeFieldButton=true
				}}
				{{#if roles.length}}
					{{#each roles}}
						{{> input-text
							labelText='Role'
							inputName=(concat 'cast[' @../index '][roles][' @index '][name]')
							value=name
							errors=errors.name
							removeFieldButton=true
							nested=true
						}}
						{{> input-text
							labelText='Character'
							inputName=(concat 'cast[' @../index '][roles][' @index '][characterName]')
							value=characterName
							errors=errors.characterName
							nested=true
						}}
					{{/each}}
					{{> input-text
						labelText='Role'
						inputName=(concat 'cast[' @index '][roles][' roles.length '][name]')
						value=''
						errors=null
						duplicable=true
						nested=true
					}}
					{{> input-text
						labelText='Character'
						inputName=(concat 'cast[' @index '][roles][' roles.length '][characterName]')
						value=''
						errors=null
						nested=true
					}}
				{{else}}
					{{> input-text
						labelText='Role'
						inputName=(concat 'cast[' @index '][roles][0][name]')
						value=''
						errors=null
						duplicable=true
						nested=true
					}}
				{{/if}}
			{{/each}}
			{{> input-text
				labelText='Cast member'
				inputName=(concat 'cast[' cast.length '][name]')
				value=''
				errors=null
				duplicable=true
			}}
			{{> input-text
				labelText='Role'
				inputName=(concat 'cast[' cast.length '][roles][0][name]')
				value=''
				errors=null
				duplicable=true
				nested=true
			}}
			{{> input-text
				labelText='Character'
				inputName=(concat 'cast[' cast.length '][roles][0][characterName]')
				value=''
				errors=null
				nested=true
			}}
		{{else}}
			{{> input-text
				labelText='Cast member'
				inputName='cast[0][name]'
				value=''
				errors=null
				duplicable=true
			}}
			{{> input-text
				labelText='Role'
				inputName=(concat 'cast[0][roles][0][name]')
				value=''
				errors=null
				duplicable=true
				nested=true
			}}
			{{> input-text
				labelText='Character'
				inputName=(concat 'cast[0][roles][0][characterName]')
				value=''
				errors=null
				nested=true
			}}
		{{/if}}
	</fieldset>
{{/with}}
